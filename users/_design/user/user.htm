<!DOCTYPE html>
<!-- Copyright(c) gert.cuykens@gmail.com -->
<html>
 <head>
  <title>user</title>
  <link type="text/css" href="user.css" rel="stylesheet"/>
  <script src="http.js"></script>
 </head>
 <body>

  <form name="dropBox" action="javascript:return null">
   <img id="picture" alt="picture" src="/users/gert/picture.png"/>
   <script>dropBox(document.getElementById('picture'))</script>
  </form>

  <form name="user" action="javascript:user.open('put','_update/form/gert',true);
                                       user.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
                                       user.setRequestHeader('If-Match',ETag);
                                       user.send(formURI(document.user));">
   <label>adress:</label>  <input name="adress" /><br/>
   <label>city:</label>    <input name="city"   /><br/>
   <label>country:</label> <input name="country"/><br/>
   <label>phone:</label>   <input name="phone"  /><br/>
   <label>email:</label>   <input name="email"  /><br/>
   <input type="submit" value="update"/>
   <script>
    get=function(){
     var i,v=JSON.parse(user.response)
     for(i in v){if(document.user[i])document.user[i].value=v[i]}
     user.removeEventListener('load',get,false)
     user.addEventListener('load',function(){ETag=user.getResponseHeader('X-Couch-Update-NewRev')},false)
    }
    user=new xhr()
    user.open('get','/users/gert',true)
    user.addEventListener('load',get,false)
    user.send()
   </script>
  </form>

  <form name="login" action="javascript:login.send(formURI(document.login))">
   <label>name:</label>     <input name="name"/><br/>
   <label>password:</label> <input name="password"/><br/>
   <input type="submit" value="login"/><br/>
   <script>
    login=new xhr()
    login.open('post','/_session',true)
    login.setRequestHeader('Content-Type','application/x-www-form-urlencoded')
   </script>
  </form>

  <form name="oauth2" action="javascript:oauth2.send()">
   <input type="submit" value="oauth2"/><br/>
   <script>
    var url='https://accounts.google.com/o/oauth2/auth?\
             client_id=21302922996.apps.googleusercontent.com&\
             redirect_uri=https://www.example.com/back&\
             scope=https://www.google.com/m8/feeds/&\
             response_type=token'
    oauth2=new xhr()
    oauth2.open('get',url,true)
   </script>
  </form>

 </body>
</html>
