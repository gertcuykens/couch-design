<!DOCTYPE html>
<!-- Copyright(c) gert.cuykens@gmail.com -->
<html>
 <head>
  <title>user</title>
  <link   type="text/css" href="user.css" rel="stylesheet"/>
  <script src="../lib/http.js"></script>
 </head>
 <body>
  <form name="user" enctype="application/x-www-form-urlencoded" action="/users/_design/user/_update/post/gert"/>
  <script>
   submit=document.createElement('input')
   submit.type='button'
   submit.value='update'
   submit.addEventListener('click',function(){
    xhr.addEventListener('load',load,false)
    xhr.open('put',document.user.action,false)
    xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')
    xhr.setRequestHeader('If-Match',document.user['_rev'].value)
    xhr.send(formURI(document.user))
   },false)
   load=function(){
    document.user.innerHTML=xhr.response
    document.user.appendChild(submit)
    //ETag=xhr.getResponseHeader('ETag')
    xhr.removeEventListener('load',load,false)
   }
   xhr.open('get','/users/_design/user/_show/html/gert',false)
   xhr.addEventListener('load',load,false)
   xhr.send()
   xhr.dropBox=document.getElementById('picture')
   xhr.open('put','/users/gert/picture.png',false)
   xhr.setRequestHeader('Content-Type','image/png')
   xhr.setRequestHeader('If-Match',document.user['_rev'].value)
   dropBox(xhr)
  </script>
 </body>
</html>
